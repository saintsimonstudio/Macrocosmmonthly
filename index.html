<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Macro-Cosm Monthly</title>

    <!-- Font Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&family=Noto+Serif+SC:wght@400;700&family=IBM+Plex+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <style>
      /* CSS Reset & Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --font-headline: "Space Grotesk", sans-serif;
        --font-body: "Noto Serif SC", serif;
        --font-mono: "IBM Plex Mono", monospace;
      }

      body {
        font-family: var(--font-body);
        background: white;
        color: black;
        line-height: 1.6;
        min-height: 100vh;
      }

      /* Container */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      /* Navigation */
      nav {
        border-bottom: 2px solid black;
        padding: 1rem 0;
      }

      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .nav-links {
        display: flex;
        gap: 2rem;
        align-items: center;
        flex: 1;
        justify-content: center;
      }

      .nav-links button {
        background: none;
        border: none;
        font-family: var(--font-headline);
        font-size: 1rem;
        cursor: pointer;
        opacity: 0.7;
        transition: opacity 0.3s;
      }

      .nav-links button:hover,
      .nav-links button.active {
        opacity: 1;
      }

      .nav-auth {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .nav-auth button {
        background: none;
        border: none;
        font-family: var(--font-mono);
        font-size: 0.875rem;
        cursor: pointer;
        opacity: 0.7;
        transition: opacity 0.3s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .nav-auth button:hover {
        opacity: 1;
      }

      /* Mobile Menu */
      .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.5rem;
      }

      .mobile-menu {
        display: none;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 2px solid black;
        width: 100%;
      }

      .mobile-menu.active {
        display: block;
      }

      .mobile-menu button {
        display: block;
        width: 100%;
        text-align: left;
        padding: 0.75rem 0;
        background: none;
        border: none;
        font-family: var(--font-headline);
        cursor: pointer;
        opacity: 0.7;
        transition: opacity 0.3s;
      }

      .mobile-menu button:hover {
        opacity: 1;
      }

      /* Buttons */
      .btn {
        padding: 0.75rem 2rem;
        border: 2px solid black;
        background: white;
        color: black;
        font-family: var(--font-mono);
        cursor: pointer;
        transition: all 0.3s;
        font-size: 1rem;
      }

      .btn:hover {
        background: black;
        color: white;
      }

      .btn-primary {
        background: black;
        color: white;
      }

      .btn-primary:hover {
        background: white;
        color: black;
      }

      /* Main Content */
      main {
        min-height: calc(100vh - 200px);
      }

      .page-content {
        display: none;
      }

      .page-content.active {
        display: block;
      }

      /* Typography */
      h1 {
        font-family: var(--font-headline);
        font-size: 3rem;
        text-align: center;
        margin-bottom: 2rem;
        letter-spacing: 0.1em;
      }

      h2 {
        font-family: var(--font-headline);
        font-size: 2rem;
        margin-bottom: 1.5rem;
        letter-spacing: 0.05em;
      }

      /* Center headings on About page */
      #page-about h2 {
        text-align: center;
      }

      h3 {
        font-family: var(--font-headline);
        font-size: 1.5rem;
        margin-bottom: 1rem;
      }

      /* Grid */
      .grid {
        display: grid;
        gap: 2rem;
      }

      .grid-2 {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      }

      .grid-3 {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }

      /* Cards */
      .card {
        border: 2px solid black;
        padding: 1.5rem;
        transition: all 0.3s;
      }

      .card:hover {
        background: black;
        color: white;
      }

      .card-bordered {
        border: 4px solid black;
        padding: 2rem;
      }

      /* Footer */
      footer {
        border-top: 2px solid black;
        margin-top: 5rem;
        padding: 2rem 0;
        text-align: center;
      }

      footer h3 {
        font-family: var(--font-headline);
        letter-spacing: 0.1em;
        margin-bottom: 0.5rem;
      }

      footer p {
        font-family: var(--font-mono);
        font-size: 0.875rem;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.75);
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 1rem;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background: white;
        border: 4px solid black;
        max-width: 500px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
      }

      .modal-header {
        background: black;
        color: white;
        padding: 1.5rem;
        border-bottom: 4px solid black;
      }

      .modal-body {
        padding: 2rem;
      }

      /* Forms */
      input,
      textarea,
      select {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid black;
        font-family: var(--font-body);
        margin-bottom: 1rem;
      }

      input:focus,
      textarea:focus,
      select:focus {
        outline: none;
        box-shadow: 0 0 0 2px black;
      }

      label {
        display: block;
        margin-bottom: 0.5rem;
        font-family: var(--font-mono);
        font-size: 0.875rem;
      }

      /* Hero Image */
      .hero-image {
        max-width: 28rem;
        width: 100%;
        margin: 0 auto 2rem;
        display: block;
      }

      /* Utility Classes */
      .text-center {
        text-align: center;
      }

      .mb-1 {
        margin-bottom: 0.5rem;
      }
      .mb-2 {
        margin-bottom: 1rem;
      }
      .mb-3 {
        margin-bottom: 1.5rem;
      }
      .mb-4 {
        margin-bottom: 2rem;
      }
      .mb-6 {
        margin-bottom: 3rem;
      }
      .mb-8 {
        margin-bottom: 4rem;
      }

      .mt-2 {
        margin-top: 1rem;
      }
      .mt-4 {
        margin-top: 2rem;
      }

      .p-4 {
        padding: 2rem;
      }
      .p-6 {
        padding: 3rem;
      }

      .hidden {
        display: none;
      }

      .opacity-60 {
        opacity: 0.6;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .mobile-menu-btn {
          display: block;
          margin-left: auto;
        }

        .nav-links,
        .nav-auth {
          display: none;
        }

        h1 {
          font-size: 2rem;
        }

        h2 {
          font-size: 1.5rem;
        }

        .grid {
          grid-template-columns: 1fr;
        }
      }

      /* Loading State */
      .loading {
        text-align: center;
        padding: 3rem;
        font-family: var(--font-body);
        font-size: 1.125rem;
      }

      /* Empty State */
      .empty-state {
        border: 4px solid black;
        padding: 3rem;
        text-align: center;
      }

      .bg-black {
        background: black;
        color: white;
      }

      .border-black {
        border: 2px solid black;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav>
      <div class="container">
        <div class="nav-container">
          <div class="nav-links">
            <button onclick="navigateTo('home')" data-page="home">HOME</button>
            <button onclick="navigateTo('articles')" data-page="articles">
              ARTICLES
            </button>
            <button onclick="navigateTo('about')" data-page="about">
              ABOUT
            </button>
            <button
              onclick="navigateTo('subscription')"
              data-page="subscription"
            >
              SHOP
            </button>
            <button onclick="navigateTo('contact')" data-page="contact">
              CONTACT
            </button>
          </div>
          <div class="nav-auth" id="navAuth">
            <button onclick="navigateTo('auth')">
              <span>ðŸ‘¤</span>
              <span>Login</span>
            </button>
          </div>
          <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
            â˜°
          </button>
        </div>
        <div class="mobile-menu" id="mobileMenu">
          <button
            onclick="
              navigateTo('home');
              toggleMobileMenu();
            "
          >
            HOME
          </button>
          <button
            onclick="
              navigateTo('articles');
              toggleMobileMenu();
            "
          >
            ARTICLES
          </button>
          <button
            onclick="
              navigateTo('about');
              toggleMobileMenu();
            "
          >
            ABOUT
          </button>
          <button
            onclick="
              navigateTo('subscription');
              toggleMobileMenu();
            "
          >
            SHOP
          </button>
          <button
            onclick="
              navigateTo('contact');
              toggleMobileMenu();
            "
          >
            CONTACT
          </button>
          <div
            style="
              border-top: 2px solid black;
              margin-top: 1rem;
              padding-top: 1rem;
            "
          >
            <button
              onclick="
                navigateTo('auth');
                toggleMobileMenu();
              "
            >
              <span>ðŸ‘¤</span> Login
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main>
      <!-- Home Page -->
      <div id="page-home" class="page-content active">
        <div class="container" style="padding: 3rem 1rem">
          <div class="text-center mb-8">
            <img
              src="images/hero-image.png.jpeg"
              alt="Macro-Cosm Monthly"
              class="hero-image"
            />
            <h1>MACRO-COSM MONTHLY</h1>
            <p
              style="font-size: 1.25rem; max-width: 42rem; margin: 0 auto 2rem"
            >
              Exploring mysteries of the Macro-Cosm through ecological wisdom,
              strategic knowledge, and curative consciousness.
            </p>
            <button class="btn" onclick="navigateTo('articles')">
              READ CURRENT ISSUE
            </button>
          </div>

          <div class="mb-8">
            <h2 class="text-center mb-4">FEATURED ARTICLES</h2>
            <div class="grid grid-3">
              <div
                class="card"
                style="cursor: pointer"
                onclick="navigateTo('articles')"
              >
                <div
                  style="
                    font-family: var(--font-mono);
                    font-size: 0.875rem;
                    margin-bottom: 0.5rem;
                  "
                ></div>
                <h3></h3>
                <p></p>
              </div>
              <div
                class="card"
                style="cursor: pointer"
                onclick="navigateTo('articles')"
              >
                <div
                  style="
                    font-family: var(--font-mono);
                    font-size: 0.875rem;
                    margin-bottom: 0.5rem;
                  "
                ></div>
                <h3></h3>
                <p></p>
              </div>
              <div
                class="card"
                style="cursor: pointer"
                onclick="navigateTo('articles')"
              >
                <div
                  style="
                    font-family: var(--font-mono);
                    font-size: 0.875rem;
                    margin-bottom: 0.5rem;
                  "
                ></div>
                <h3></h3>
                <p></p>
              </div>
            </div>
          </div>

          <div
            style="
              border-top: 2px solid black;
              padding-top: 3rem;
              text-align: center;
              max-width: 48rem;
              margin: 0 auto;
            "
          >
            <h2>ABOUT THE PUBLICATION</h2>
            <p
              style="
                font-size: 1.125rem;
                line-height: 1.8;
                margin-bottom: 1.5rem;
              "
            >
              Macro-Cosm Monthly is a Publication dedicated to the exploration
              of economic establishment, Lifestyle as it relates to the Locale,
              and the interconnectedness of all interdependent Ecosystems. Each
              issue delves into the hidden knowledge that merges The Macro-Cosm
              with all the aspects that at a wide glance can seem Microscopic.
            </p>
            <button class="btn" onclick="navigateTo('about')">
              LEARN MORE
            </button>
          </div>
        </div>
      </div>

      <!-- Articles Page -->
      <div id="page-articles" class="page-content">
        <div class="container" style="padding: 3rem 1rem">
          <h1>ARCHIVE</h1>
          <p class="text-center mb-6" style="font-size: 1.125rem">
            Browse all issues by year and month
          </p>
          <div id="articlesContent" class="loading">Loading issues...</div>
        </div>
      </div>

      <!-- About Page -->
      <div id="page-about" class="page-content">
        <div class="container" style="padding: 3rem 1rem; max-width: 56rem">
          <h1>ABOUT</h1>

          <div style="display: flex; flex-direction: column; gap: 2rem">
            <div class="card">
              <h2>OUR MISSION</h2>
              <p style="font-size: 1.125rem; line-height: 1.8">
                Illuminating the invisible threads between global systems and
                daily life. Macro-Cosm Monthly exists to bridge the gap between
                the universal and the particularâ€”the global economy and the
                local household. We provide the strategic knowledge and curative
                consciousness required to navigate an increasingly complex
                world.
              </p>
            </div>

            <div class="card">
              <h2>EDITORIAL PHILOSOPHY</h2>
              <p style="font-size: 1.125rem; line-height: 1.8">
                We focus on the Macro and Micro and how they pulse through our
                interdependent ecosystems. We draw from diverse disciplines,
                including market theory and societal ecology, to find the common
                threads of interaction. Our contributors are scholars and
                practitioners who value clarity without dilution, ensuring our
                insights into the global "Macro" remain applicable & tethered to
                every "Micro."
              </p>
            </div>

            <div class="card">
              <h2>PUBLICATION HISTORY</h2>
              <p style="font-size: 1.125rem; line-height: 1.8">
                Founded in 2026 By Editor and Founder Jibril Harness, Macro-Cosm
                Monthly was born from a need for a publication that applies
                scrutiny to all that is syndicated. Each monthly issue offers a
                deep dive into The Macro-Cosm's subsidiary establishments
                serving as a vital resource for the contemporary seeker of
                information.
              </p>
            </div>

            <div class="card bg-black">
              <h2>AS WITHIN, SO WITHOUT</h2>
              <p
                style="
                  font-size: 1.125rem;
                  line-height: 1.8;
                  text-align: center;
                  font-style: italic;
                "
              >
                "What is meant for you will reach you, even if it is between two
                mountains, and what is not meant for you will not reach you even
                if it's between your two lips."
              </p>
              <p class="text-center mt-2" style="font-family: var(--font-mono)">
                â€” Umar ibn al-Khattab
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Subscription Page -->
      <div id="page-subscription" class="page-content">
        <div class="container" style="padding: 3rem 1rem; max-width: 56rem">
          <h1>SHOP</h1>
          <p
            class="text-center mb-6"
            style="font-size: 1.125rem; max-width: 42rem; margin: 0 auto 3rem"
          >
            Join our community of readers and gain access to the complete
            archives of the Macro-Cosm
          </p>

          <div class="grid grid-2 mb-4">
            <div
              class="card-bordered"
              style="cursor: pointer"
              onclick="selectTier('monthly')"
            >
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: start;
                  margin-bottom: 1rem;
                "
              >
                <h2>MONTHLY</h2>
                <span id="checkMonthly" class="hidden">âœ“</span>
              </div>
              <p
                style="
                  font-family: var(--font-mono);
                  font-size: 2rem;
                  margin-bottom: 1rem;
                "
              >
                $8<span style="font-size: 1rem">/month</span>
              </p>
              <ul style="list-style: none">
                <li>â€¢ Full access to current issue</li>
                <li>â€¢ Complete digital archives</li>
                <li>â€¢ Cancel anytime</li>
              </ul>
            </div>

            <div
              class="card-bordered bg-black"
              style="cursor: pointer; position: relative"
              onclick="selectTier('yearly')"
            >
              <div
                style="
                  position: absolute;
                  top: 1rem;
                  right: 1rem;
                  background: white;
                  color: black;
                  padding: 0.25rem 0.75rem;
                  font-family: var(--font-mono);
                  font-size: 0.75rem;
                "
              >
                SAVE $16
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: start;
                  margin-bottom: 1rem;
                "
              >
                <h2>YEARLY</h2>
                <span id="checkYearly" class="hidden">âœ“</span>
              </div>
              <p
                style="
                  font-family: var(--font-mono);
                  font-size: 2rem;
                  margin-bottom: 1rem;
                "
              >
                $80<span style="font-size: 1rem">/year</span>
              </p>
              <ul style="list-style: none">
                <li>â€¢ All monthly benefits</li>
                <li>â€¢ 12 complete issues</li>
                <li>â€¢ Priority support</li>
              </ul>
            </div>
          </div>

          <div id="subscriptionForm" class="hidden">
            <div class="card-bordered mb-4">
              <h3
                style="font-family: var(--font-headline); margin-bottom: 1.5rem"
              >
                YOUR INFORMATION
              </h3>
              <div>
                <label>FULL NAME *</label>
                <input type="text" id="subName" required />
              </div>
              <div>
                <label>EMAIL *</label>
                <input type="email" id="subEmail" required />
              </div>
            </div>

            <div id="paymentMethods" class="card-bordered hidden">
              <h3
                style="font-family: var(--font-headline); margin-bottom: 1.5rem"
              >
                PAYMENT METHOD
              </h3>
              <div
                id="processingPayment"
                class="hidden bg-black text-center p-6"
              >
                <p style="font-family: var(--font-headline)">PROCESSING...</p>
              </div>
              <div id="paymentButtons">
                <button
                  class="btn btn-primary mb-2"
                  style="width: 100%"
                  onclick="processPayment('apple')"
                >
                  PAY WITH APPLE PAY
                </button>
                <button
                  class="btn btn-primary mb-2"
                  style="width: 100%"
                  onclick="processPayment('google')"
                >
                  ðŸ’³ PAY WITH GOOGLE PAY
                </button>
                <button
                  class="btn mb-2"
                  style="width: 100%"
                  onclick="processPayment('card')"
                >
                  ðŸ’³ PAY WITH CARD
                </button>
                <p
                  class="text-center opacity-60"
                  style="font-size: 0.75rem; margin-top: 1rem"
                >
                  All transactions are secure and encrypted. Your subscription
                  will auto-renew unless cancelled.
                </p>
              </div>
            </div>
          </div>

          <div id="subscriptionSuccess" class="hidden">
            <div class="card-bordered bg-black text-center p-6">
              <div style="font-size: 3rem; margin-bottom: 1rem">âœ“</div>
              <h2>WELCOME READER</h2>
              <p style="font-size: 1.125rem; margin-bottom: 1.5rem">
                Your subscription has been activated. You now have access to any
                mysteries within the Macro-Cosm.
              </p>
              <p
                style="
                  font-family: var(--font-mono);
                  font-size: 0.875rem;
                  opacity: 0.75;
                "
              >
                A confirmation email has been sent
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Page -->
      <div id="page-contact" class="page-content">
        <div class="container" style="padding: 3rem 1rem; max-width: 64rem">
          <h1>CONTACT</h1>

          <div class="grid grid-2 mb-6">
            <div>
              <div class="card mb-4">
                <h3>EDITORIAL OFFICE</h3>
                <p style="margin-bottom: 0.75rem">
                  editor@macrocosmmonthly.com
                </p>
                <p style="font-size: 0.875rem; opacity: 0.75">
                  For article submissions, editorial inquiries, and
                  collaboration proposals
                </p>
              </div>

              <div class="card mb-4">
                <h3>RESEARCH SERVICES</h3>
                <p style="margin-bottom: 0.5rem">Available for purchase:</p>
                <ul style="margin-left: 1rem; margin-bottom: 0.75rem">
                  <li>â€¢ Market Intelligence</li>
                  <li>â€¢ Geopolitical Intelligence</li>
                  <li>â€¢ Macro-Quantitative Research</li>
                  <li>â€¢ Bespoke Informational Reporting</li>
                </ul>
                <p style="font-size: 0.875rem; opacity: 0.75">
                  Contact us for pricing and custom research inquiries.
                </p>
              </div>

              <div class="card">
                <h3>SUBSCRIPTION TIERS</h3>
                <div
                  class="border-black mb-2"
                  style="padding: 1rem; border: 2px solid black"
                >
                  <h4
                    style="
                      font-family: var(--font-headline);
                      font-size: 1.25rem;
                      margin-bottom: 0.5rem;
                    "
                  >
                    MONTHLY
                  </h4>
                  <p
                    style="
                      font-family: var(--font-mono);
                      font-size: 1.5rem;
                      margin-bottom: 0.5rem;
                    "
                  >
                    $8/month
                  </p>
                  <p style="font-size: 0.875rem; opacity: 0.75">
                    Full access to current issue and digital archives
                  </p>
                </div>
                <div
                  class="bg-black"
                  style="padding: 1rem; border: 2px solid black"
                >
                  <h4
                    style="
                      font-family: var(--font-headline);
                      font-size: 1.25rem;
                      margin-bottom: 0.5rem;
                    "
                  >
                    YEARLY
                  </h4>
                  <p
                    style="
                      font-family: var(--font-mono);
                      font-size: 1.5rem;
                      margin-bottom: 0.5rem;
                    "
                  >
                    $80/year
                  </p>
                  <p style="font-size: 0.875rem; opacity: 0.75">
                    Save $16 with annual subscription â€¢ 12 issues
                  </p>
                </div>
              </div>
            </div>

            <div class="card">
              <h3>SEND A MESSAGE</h3>
              <div id="contactSuccess" class="hidden bg-black text-center p-4">
                <div style="font-size: 2rem">âœ“</div>
                <p style="font-family: var(--font-headline)">
                  MESSAGE RECEIVED
                </p>
                <p style="font-size: 0.875rem; margin-top: 0.5rem">
                  We will respond within 48 hours
                </p>
              </div>
              <form id="contactForm">
                <label>NAME *</label>
                <input type="text" id="contactName" required />

                <label>EMAIL *</label>
                <input type="email" id="contactEmail" required />

                <label>SUBJECT *</label>
                <select id="contactSubject" required>
                  <option value="">Select a subject</option>
                  <option value="submission">Article Submission</option>
                  <option value="editorial">Editorial Inquiry</option>
                  <option value="subscription">Subscription</option>
                  <option value="technical">Technical Support</option>
                  <option value="general">General Question</option>
                </select>

                <label>MESSAGE *</label>
                <textarea id="contactMessage" rows="6" required></textarea>

                <button
                  type="submit"
                  class="btn btn-primary"
                  style="width: 100%"
                >
                  SEND MESSAGE
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Auth Page -->
      <div id="page-auth" class="page-content">
        <div class="container" style="padding: 3rem 1rem; max-width: 32rem">
          <h1 id="authTitle">LOGIN</h1>
          <div class="card-bordered">
            <form id="authForm">
              <label>EMAIL *</label>
              <input type="email" id="authEmail" required />

              <label>PASSWORD *</label>
              <input type="password" id="authPassword" required />

              <div id="signupFields" class="hidden">
                <label>NAME *</label>
                <input type="text" id="authName" />
              </div>

              <button
                type="submit"
                class="btn btn-primary mb-2"
                style="width: 100%"
                id="authSubmitBtn"
              >
                LOGIN
              </button>

              <button
                type="button"
                class="btn"
                style="width: 100%"
                onclick="toggleAuthMode()"
              >
                <span id="authToggleText">Need an account? Sign up</span>
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <h3>MACRO-COSM MONTHLY</h3>
        <p>Â© 2026 â€¢ Exploring The Mysteries of the Macro-Cosm</p>
        <p style="font-size: 0.75rem; opacity: 0.6; margin-top: 1rem">
          As Within, So Without
        </p>
      </div>
    </footer>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="text-center">PURCHASE ISSUE</h2>
        </div>
        <div class="modal-body">
          <div class="text-center mb-4">
            <p
              style="font-size: 1.125rem; margin-bottom: 0.5rem"
              id="modalIssueTitle"
            ></p>
            <p
              style="
                font-family: var(--font-mono);
                font-size: 2rem;
                margin-bottom: 1rem;
              "
            >
              $4.00
            </p>
            <p style="font-size: 0.875rem; opacity: 0.6">
              One-time purchase â€¢ Instant access
            </p>
          </div>
          <div id="modalProcessing" class="hidden bg-black text-center p-4">
            <p style="font-family: var(--font-headline)">PROCESSING...</p>
          </div>
          <div id="modalButtons">
            <button
              class="btn btn-primary mb-2"
              style="width: 100%"
              onclick="completePurchase()"
            >
              COMPLETE PURCHASE
            </button>
            <button
              class="btn"
              style="width: 100%"
              onclick="closePaymentModal()"
            >
              CANCEL
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Configuration
      const SUPABASE_PROJECT_ID = "etmbvypjmywgrpvbskyp";
      const SUPABASE_ANON_KEY =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0bWJ2eXBqbXl3Z3JwdmJza3lwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0MjA4NzUsImV4cCI6MjA4NTk5Njg3NX0.l-qn9l0PHsz7J4L9ETJvUJ7McIhzIqRE2tYY2VB92C4";
      const API_BASE = `https://${SUPABASE_PROJECT_ID}.supabase.co/functions/v1/make-server-6c75f29e`;

      // State
      let currentPage = "home";
      let hasSubscription = false;
      let purchasedIssues = new Set();
      let selectedTier = null;
      let authMode = "login";
      let selectedIssue = null;

      // Navigation
      function navigateTo(page) {
        currentPage = page;

        // Hide all pages
        document
          .querySelectorAll(".page-content")
          .forEach((p) => p.classList.remove("active"));

        // Show selected page
        document.getElementById("page-" + page).classList.add("active");

        // Update nav active state
        document.querySelectorAll(".nav-links button").forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.page === page);
        });

        // Load data for specific pages
        if (page === "articles") {
          loadIssues();
        }

        // Scroll to top
        window.scrollTo(0, 0);
      }

      function toggleMobileMenu() {
        document.getElementById("mobileMenu").classList.toggle("active");
      }

      // Auth
      function updateAuthUI() {
        const accessToken = sessionStorage.getItem("access_token");
        const userEmail = sessionStorage.getItem("user_email");
        const navAuth = document.getElementById("navAuth");

        if (accessToken && userEmail) {
          navAuth.innerHTML = `
                    <span style="opacity: 0.7; font-size: 0.875rem;">ðŸ‘¤ ${userEmail.split("@")[0]}</span>
                    <button onclick="logout()">
                        <span>ðŸšª</span>
                        <span>Logout</span>
                    </button>
                `;
        } else {
          navAuth.innerHTML = `
                    <button onclick="navigateTo('auth')">
                        <span>ðŸ‘¤</span>
                        <span>Login</span>
                    </button>
                `;
        }
      }

      function logout() {
        sessionStorage.removeItem("access_token");
        sessionStorage.removeItem("user_email");
        hasSubscription = false;
        purchasedIssues = new Set();
        updateAuthUI();
        navigateTo("home");
      }

      function toggleAuthMode() {
        authMode = authMode === "login" ? "signup" : "login";

        document.getElementById("authTitle").textContent =
          authMode === "login" ? "LOGIN" : "SIGN UP";
        document.getElementById("authSubmitBtn").textContent =
          authMode === "login" ? "LOGIN" : "SIGN UP";
        document.getElementById("authToggleText").textContent =
          authMode === "login"
            ? "Need an account? Sign up"
            : "Have an account? Login";
        document
          .getElementById("signupFields")
          .classList.toggle("hidden", authMode === "login");
      }

      document
        .getElementById("authForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const email = document.getElementById("authEmail").value;
          const password = document.getElementById("authPassword").value;
          const name = document.getElementById("authName").value;

          try {
            if (authMode === "signup") {
              const response = await fetch(`${API_BASE}/signup`, {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                  Authorization: `Bearer ${SUPABASE_ANON_KEY}`,
                },
                body: JSON.stringify({ email, password, name }),
              });

              if (response.ok) {
                alert("Account created! Please login.");
                toggleAuthMode();
              } else {
                const error = await response.text();
                alert("Signup failed: " + error);
              }
            } else {
              // Login using Supabase Auth API directly
              const response = await fetch(
                `https://${SUPABASE_PROJECT_ID}.supabase.co/auth/v1/token?grant_type=password`,
                {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    apikey: SUPABASE_ANON_KEY,
                  },
                  body: JSON.stringify({ email, password }),
                },
              );

              if (response.ok) {
                const data = await response.json();
                sessionStorage.setItem("access_token", data.access_token);
                sessionStorage.setItem("user_email", email);
                updateAuthUI();
                navigateTo("home");
              } else {
                alert("Login failed. Please check your credentials.");
              }
            }
          } catch (error) {
            console.error("Auth error:", error);
            alert("Authentication failed. Please try again.");
          }
        });

      // Articles/Archive
      async function loadIssues() {
        const content = document.getElementById("articlesContent");
        content.innerHTML = '<div class="loading">Loading issues...</div>';

        try {
          const response = await fetch(`${API_BASE}/issues`, {
            headers: { Authorization: `Bearer ${SUPABASE_ANON_KEY}` },
          });

          if (!response.ok) {
            content.innerHTML =
              '<div class="empty-state"><h2 style="font-family: var(--font-headline); font-size: 1.5rem; margin-bottom: 1rem;">No Issues Available Yet</h2><p>Check back soon for published content.</p></div>';
            return;
          }

          const data = await response.json();

          // Load user purchases
          await loadUserPurchases();

          // Group by year
          const groupedByYear = {};
          data.issues.forEach((issue) => {
            if (!groupedByYear[issue.year]) {
              groupedByYear[issue.year] = [];
            }
            groupedByYear[issue.year].push(issue);
          });

          const years = Object.keys(groupedByYear).sort((a, b) => b - a);

          if (years.length === 0) {
            content.innerHTML =
              '<div class="empty-state"><h2 style="font-family: var(--font-headline); font-size: 1.5rem; margin-bottom: 1rem;">No Issues Available Yet</h2><p>Check back soon for published content.</p></div>';
            return;
          }

          let html =
            '<div style="display: flex; flex-direction: column; gap: 1.5rem;">';

          years.forEach((year) => {
            const issues = groupedByYear[year];
            html += `
                        <div class="card" style="padding: 0;">
                            <button onclick="toggleYear(${year})" style="width: 100%; padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; background: none; border: none; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='black'; this.style.color='white'" onmouseout="this.style.background=''; this.style.color=''">
                                <span style="font-family: var(--font-headline); font-size: 2rem;">${year}</span>
                                <span style="font-family: var(--font-mono);">${issues.length} ${issues.length === 1 ? "ISSUE" : "ISSUES"} <span id="chevron-${year}">â–¶</span></span>
                            </button>
                            <div id="year-${year}" class="hidden" style="border-top: 2px solid black;">
                    `;

            issues.forEach((issue, idx) => {
              const isUnlocked =
                hasSubscription ||
                purchasedIssues.has(`${year}-${issue.month}`);
              html += `
                            <div style="${idx > 0 ? "border-top: 2px solid black;" : ""} padding: 1.5rem; background: #f9f9f9;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <h3 style="font-family: var(--font-headline); font-size: 1.5rem;">${issue.month} ${year}</h3>
                                    ${
                                      isUnlocked
                                        ? '<div style="border: 2px solid black; padding: 0.5rem 1rem; font-family: var(--font-mono); font-size: 0.875rem;">âœ“ UNLOCKED</div>'
                                        : `<button onclick="openPurchaseModal(${year}, '${issue.month}')" class="btn-primary" style="border: 2px solid black; padding: 0.5rem 1rem; font-family: var(--font-mono); font-size: 0.875rem; background: black; color: white; cursor: pointer;">ðŸ”’ BUY $4</button>`
                                    }
                                </div>
                                <ul style="list-style: none;">
                        `;

              issue.articles.forEach((article) => {
                html += `
                                <li style="margin-bottom: 0.75rem; display: flex; align-items: start; gap: 0.75rem; ${isUnlocked ? "cursor: pointer;" : "opacity: 0.4;"}">
                                    <span>${isUnlocked ? "â–¶" : "ðŸ”’"}</span>
                                    <span>${article.title}</span>
                                </li>
                            `;
              });

              html += `
                                </ul>
                            </div>
                        `;
            });

            html += `
                            </div>
                        </div>
                    `;
          });

          html += "</div>";

          // Add statistics
          const totalIssues = data.issues.length;
          const totalArticles = data.issues.reduce(
            (sum, issue) => sum + issue.articles.length,
            0,
          );

          html += `
                    <div class="grid grid-3 mt-4">
                        <div class="card text-center">
                            <div style="font-family: var(--font-headline); font-size: 3rem;">${totalIssues}</div>
                            <div style="font-family: var(--font-mono);">TOTAL ISSUES</div>
                        </div>
                        <div class="card text-center">
                            <div style="font-family: var(--font-headline); font-size: 3rem;">${totalArticles}</div>
                            <div style="font-family: var(--font-mono);">TOTAL ARTICLES</div>
                        </div>
                        <div class="card text-center">
                            <div style="font-family: var(--font-headline); font-size: 3rem;">${years.length}</div>
                            <div style="font-family: var(--font-mono);">YEARS PUBLISHED</div>
                        </div>
                    </div>
                `;

          content.innerHTML = html;
        } catch (error) {
          console.error("Failed to load issues:", error);
          content.innerHTML =
            '<div class="empty-state"><h2 style="font-family: var(--font-headline); font-size: 1.5rem; margin-bottom: 1rem;">Error Loading Issues</h2><p>Please try again later.</p></div>';
        }
      }

      function toggleYear(year) {
        const yearDiv = document.getElementById("year-" + year);
        const chevron = document.getElementById("chevron-" + year);
        yearDiv.classList.toggle("hidden");
        chevron.textContent = yearDiv.classList.contains("hidden") ? "â–¶" : "â–¼";
      }

      async function loadUserPurchases() {
        const accessToken = sessionStorage.getItem("access_token");
        if (!accessToken) return;

        try {
          const response = await fetch(`${API_BASE}/purchases/list`, {
            headers: { Authorization: `Bearer ${accessToken}` },
          });

          if (response.ok) {
            const data = await response.json();
            purchasedIssues = new Set(data.purchasedIssues || []);
          }
        } catch (error) {
          console.error("Failed to load purchases:", error);
        }
      }

      function openPurchaseModal(year, month) {
        selectedIssue = { year, month };
        document.getElementById("modalIssueTitle").textContent =
          `${month} ${year}`;
        document.getElementById("paymentModal").classList.add("active");
      }

      function closePaymentModal() {
        document.getElementById("paymentModal").classList.remove("active");
        selectedIssue = null;
      }

      function completePurchase() {
        document.getElementById("modalButtons").classList.add("hidden");
        document.getElementById("modalProcessing").classList.remove("hidden");

        setTimeout(() => {
          if (selectedIssue) {
            purchasedIssues.add(`${selectedIssue.year}-${selectedIssue.month}`);
          }
          closePaymentModal();
          document.getElementById("modalButtons").classList.remove("hidden");
          document.getElementById("modalProcessing").classList.add("hidden");
          loadIssues();
        }, 2000);
      }

      // Subscription
      function selectTier(tier) {
        selectedTier = tier;

        document
          .getElementById("checkMonthly")
          .classList.toggle("hidden", tier !== "monthly");
        document
          .getElementById("checkYearly")
          .classList.toggle("hidden", tier !== "yearly");
        document.getElementById("subscriptionForm").classList.remove("hidden");
        document.getElementById("subscriptionSuccess").classList.add("hidden");

        // Show payment methods when both fields filled
        const nameInput = document.getElementById("subName");
        const emailInput = document.getElementById("subEmail");

        const checkFields = () => {
          if (nameInput.value && emailInput.value) {
            document
              .getElementById("paymentMethods")
              .classList.remove("hidden");
          }
        };

        nameInput.addEventListener("input", checkFields);
        emailInput.addEventListener("input", checkFields);
      }

      function processPayment(method) {
        document.getElementById("paymentButtons").classList.add("hidden");
        document.getElementById("processingPayment").classList.remove("hidden");

        setTimeout(() => {
          hasSubscription = true;
          document.getElementById("subscriptionForm").classList.add("hidden");
          document
            .getElementById("subscriptionSuccess")
            .classList.remove("hidden");
        }, 2000);
      }

      // Contact Form
      document.getElementById("contactForm").addEventListener("submit", (e) => {
        e.preventDefault();

        document.getElementById("contactForm").classList.add("hidden");
        document.getElementById("contactSuccess").classList.remove("hidden");

        setTimeout(() => {
          document.getElementById("contactForm").classList.remove("hidden");
          document.getElementById("contactSuccess").classList.add("hidden");
          document.getElementById("contactForm").reset();
        }, 3000);
      });

      // Initialize
      updateAuthUI();
    </script>
  </body>
</html>
